#include "mbed.h"

// TODO fill with data from JSON
#define IP_ADDR     $ip
#define SUBNET_MASK $subnet_mask
#define DEFAULT_GW  $default_gateway
#define LOCATION    $location
#define DEVICE_ID   $device_id

/**
 * @brief Receive MQTT data from `topic` and relay it to the appropriate
 * function.
 */
void mqttReceive(const char* topic, void* data, int len) {
    // TODO This will get populated by devconf
}

/// @brief Send `data` of length `len` to the MQTT topic `topic`.
void mqttSend(const char* topic, void* data, int len) {
    // TODO later
}

int main(void)
{
    // Connect ethernet
    // Connect MQTT
    // Listen for events and call mqttReceive when appropriate
    // Whatever else
    return 0;
}
